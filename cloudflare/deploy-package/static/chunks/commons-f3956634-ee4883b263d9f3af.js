(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8258],{82:(e,t,r)=>{"use strict";r.d(t,{AT:()=>a,c$:()=>s}),r(9509);class o extends Error{constructor(e,t,r,o){super(e),this.name="ApiError",this.status=t,this.statusText=r,this.data=o}}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timeout:r=15e3,retries:a=0,retryDelay:s=1e3,retryCondition:n,shouldRetryOnServerError:i=!0,...l}=t,c=0,d=a+1;for(;c<d;){let t=new AbortController,a=setTimeout(()=>t.abort(),r);try{let r,s;r=e.startsWith("http")?e:new URL(e,window.location.origin).toString(),console.log("API请求URL:",r);let n=Date.now(),i=await fetch(r,{...l,signal:t.signal,headers:{Accept:"application/json","Content-Type":"application/json",...l.headers}});clearTimeout(a);let c=Date.now()-n;c>2e3&&console.warn("慢请求: ".concat(r," 耗时 ").concat(c,"ms"));try{s=await i.json()}catch(e){s={error:"Invalid JSON response"}}if(!i.ok){let e=(null==s?void 0:s.error)||(null==s?void 0:s.message)||"请求失败，状态码: ".concat(i.status);throw new o(e,i.status,i.statusText,s)}return s}catch(t){if(clearTimeout(a),"AbortError"===t.name)throw new o("请求超时",408,"Request Timeout");if(++c>=d){if(t instanceof o)throw t;throw new o(t.message||"未知错误",500,"Internal Error")}if(!(n?n(t instanceof o?t:new o(t.message,500,"Error")):i&&t instanceof o&&t.status>=500))throw t;let e=Math.min(s*Math.pow(1.5,c-1),1e4);console.log("请求失败，".concat(e,"ms后重试 (").concat(c,"/").concat(d,")...")),await new Promise(t=>setTimeout(t,e))}}throw new o("请求失败，达到最大重试次数",500,"Maximum Retries Exceeded")}function s(e,t){let r;return r=new URL(e,window.location.origin),Object.entries(t).forEach(e=>{let[t,o]=e;void 0!==o&&r.searchParams.append(t,String(o))}),r.toString()}},811:(e,t,r)=>{"use strict";r.d(t,{A:()=>q});var o=r(5155),a=r(2115),s=r(8482),n=r(4503);let i=[{id:"hot",name_en:"Hot",name_zh:"热门"},{id:"new",name_en:"New",name_zh:"新币"},{id:"meme",name_en:"Meme",name_zh:"Meme"}];r(82);let l={},c={DEFAULT:3e5},d=[{token:"0xa5957e0e2565dc93880da7be32abcbdf55788888",chain:"bsc",symbol:"ATM",name:"ATM Token",logo_url:"https://www.logofacade.com/token_icon_request/65ffb2a20a9e59af22dae8a5_1711256226.png",current_price_usd:10993584854389429e-21,price_change_24h:-76.53,tx_volume_u_24h:13385053.845136339,holders:14304},{token:"0xc5102fe9359fd9a28f877a67e36b0f050d81a3cc",chain:"eth",symbol:"BTC",name:"Bitcoin",logo_url:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png",current_price_usd:66000.5,price_change_24h:2.3,tx_volume_u_24h:25e6,holders:1e6}];var u=r(2085),m=r(3999);let h=(0,u.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),f=a.forwardRef((e,t)=>{let{className:r,variant:a,...s}=e;return(0,o.jsx)("div",{ref:t,role:"alert",className:(0,m.cn)(h({variant:a}),r),...s})});f.displayName="Alert",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("h5",{ref:t,className:(0,m.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})}).displayName="AlertTitle";let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,m.cn)("text-sm [&_p]:leading-relaxed",r),...a})});g.displayName="AlertDescription";var p=r(5339),x=r(3904),b=r(2355),v=r(3052),w=r(7168),y=r(1362),j=r(5607),k=r(1539),N=r(9424),_=r(7632),A=r(3550),T=r(9964),S=r(3109),R=r(5695),E=r(6766);let C=e=>0===e?"$0.00":e<1e-6?"$"+e.toExponential(2):e<.01?"$"+e.toFixed(6):e<1?"$"+e.toFixed(4):e<1e3?"$"+e.toFixed(2):"$"+e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),I=e=>{let t=e>=0?"+":"";return"".concat(t).concat(e.toFixed(2),"%")},D=e=>0===e?"$0":e>=1e9?"$"+(e/1e9).toFixed(2)+"B":e>=1e6?"$"+(e/1e6).toFixed(2)+"M":e>=1e3?"$"+(e/1e3).toFixed(2)+"K":"$"+e.toFixed(2),O=e=>{if(!e)return"N/A";let t=parseFloat(e);return isNaN(t)?"N/A":D(t)},P=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/1e3);if(t<60)return"".concat(t,"秒前");let r=Math.floor(t/60);if(r<60)return"".concat(r,"分钟前");let o=Math.floor(r/60);return o<24?"".concat(o,"小时前"):e.toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"})};var M=r(8500);let L=(0,a.memo)(function(e){let{token:t,index:r,darkMode:s,onClick:n}=e,[i,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),{resolvedTheme:f}=(0,y.D)(),g="dark"===f||s;(0,a.useEffect)(()=>{h(!!t.logo_url&&""!==t.logo_url.trim())},[t.logo_url]);let p=t.market_cap?O(t.market_cap):t.current_price_usd&&t.holders?O((t.current_price_usd*t.holders).toString()):"暂无",x=D(t.tx_volume_u_24h);return(0,o.jsxs)("div",{className:(0,m.cn)("grid grid-cols-12 gap-2 py-3 px-3 text-sm items-center cursor-pointer rounded-lg transition-all duration-200",g?"hover:bg-muted/70 hover:scale-[1.01]":"hover:bg-secondary/90 hover:shadow-md hover:scale-[1.01]",(r+1)%2==0?g?"bg-muted/20":"bg-secondary/50":g?"bg-transparent":"bg-background"),onClick:()=>n(t),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[(0,o.jsxs)("div",{className:"flex items-center col-span-6",children:[(0,o.jsx)("div",{className:(0,m.cn)("relative flex-shrink-0","transition-transform duration-200",c?"scale-110":""),children:!u||i?(0,o.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-xs font-medium text-white shadow-sm",style:(()=>{let e=t.symbol.charCodeAt(0)%360,r=(t.symbol.length>1?t.symbol.charCodeAt(1):0)%360;return{background:g?"linear-gradient(135deg, hsl(".concat(e,", 70%, 40%), hsl(").concat(r,", 70%, 30%))"):"linear-gradient(135deg, hsl(".concat(e,", 80%, 60%), hsl(").concat(r,", 80%, 50%))")}})(),children:t.symbol.substring(0,2).toUpperCase()}):(0,o.jsx)("div",{className:(0,m.cn)("w-10 h-10 rounded-full overflow-hidden","shadow-sm transition-transform duration-200",c?"shadow-md":""),children:(0,o.jsx)(E.default,{src:t.logo_url,alt:t.name||t.symbol,width:40,height:40,className:(0,m.cn)("w-full h-full object-cover",c?"scale-110":""),style:{transition:"transform 0.2s ease"},onError:()=>{l(!0)}})})}),(0,o.jsxs)("div",{className:"ml-3 flex flex-col",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("span",{className:(0,m.cn)("font-semibold transition-all",c?"text-primary":""),children:t.symbol}),(0,o.jsx)("span",{className:"ml-1 text-xs py-0.5 px-1.5 bg-muted/30 rounded-sm",children:{ethereum:"ETH",bsc:"BSC",arbitrum:"ARB",polygon:"POLY",base:"BASE",avalanche:"AVAX",optimism:"OP",solana:"SOL"}[t.chain.toLowerCase()]||t.chain.toUpperCase().substring(0,4)})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-1 mt-0.5",children:[(0,o.jsxs)("div",{className:"text-[10px] text-muted-foreground whitespace-nowrap",children:["V: ",p]}),(0,o.jsxs)("div",{className:"text-[10px] text-muted-foreground whitespace-nowrap",children:["H: ",x]})]})]})]}),(0,o.jsx)("div",{className:(0,m.cn)("col-span-3 font-medium transition-colors",c?"text-foreground":g?"text-foreground/90":"text-foreground/80"),children:C(t.current_price_usd)}),(0,o.jsx)("div",{className:"col-span-3 font-medium flex items-center justify-end",children:(0,o.jsxs)("div",{className:(()=>{let e=t.price_change_24h;return(0,m.cn)(e>0?"text-emerald-500":e<0?"text-rose-500":"text-muted-foreground",0===e?"":e>0?"bg-emerald-500/10":"bg-rose-500/10","px-2 py-0.5 rounded-full text-xs font-medium flex items-center justify-center","transition-all duration-200")})(),children:[t.price_change_24h>0&&(0,o.jsx)(S.A,{className:"w-3 h-3 mr-1"}),t.price_change_24h<0&&(0,o.jsx)(M.A,{className:"w-3 h-3 mr-1"}),I(t.price_change_24h)]})})]})},(e,t)=>e.token.token===t.token.token&&e.token.chain===t.token.chain&&e.token.current_price_usd===t.token.current_price_usd&&e.token.price_change_24h===t.token.price_change_24h&&e.index===t.index&&e.darkMode===t.darkMode),F=(0,a.memo)(e=>{let{onRefresh:t,isRefreshing:r,lastUpdated:a,isDark:s}=e;return(0,o.jsxs)("div",{className:(0,m.cn)("flex items-center justify-end mt-4 text-xs",s?"text-muted-foreground":"text-muted-foreground/80"),children:[a&&(0,o.jsxs)("span",{className:"mr-2",children:["最后更新: ",P(a)]}),(0,o.jsxs)(w.$,{variant:"outline",size:"sm",onClick:t,disabled:r,className:(0,m.cn)("px-3 h-7 rounded-full gap-1 transition-all",s?"border-muted hover:bg-muted hover:border-muted/80":"border-border hover:bg-secondary hover:border-muted/50",r?"opacity-80":""),children:[(0,o.jsx)(x.A,{className:(0,m.cn)("h-3.5 w-3.5",r?"animate-spin":"")}),r?"刷新中...":"刷新"]})]})});F.displayName="RefreshButton";let z=(0,a.memo)(e=>{let{isDark:t}=e;return(0,o.jsxs)("div",{className:(0,m.cn)("grid grid-cols-12 gap-2 py-3 px-4 text-xs font-medium mb-3 rounded-lg","backdrop-blur-sm sticky top-0 z-10",t?"text-primary-foreground bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/10":"text-primary/90 bg-gradient-to-r from-primary/5 to-transparent border border-primary/10"),children:[(0,o.jsxs)("div",{className:"col-span-6 flex items-center",children:[(0,o.jsx)("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-primary/70 mr-2"}),"代币/链池"]}),(0,o.jsxs)("div",{className:"col-span-3 flex items-center",children:[(0,o.jsx)("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-primary/70 mr-2"}),"价格"]}),(0,o.jsxs)("div",{className:"col-span-3 flex items-center justify-end",children:[(0,o.jsx)("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-primary/70 mr-2"}),"24h涨幅"]})]})});z.displayName="TableHeader";let U=(0,a.memo)(e=>{let{isDark:t}=e;return(0,o.jsxs)("div",{className:(0,m.cn)("text-center py-12 rounded-lg","border border-dashed",t?"text-muted-foreground bg-muted/5 border-muted/30":"text-muted-foreground/80 bg-secondary/20 border-muted/20"),children:[(0,o.jsx)("div",{className:"text-base font-medium",children:"没有找到代币数据"}),(0,o.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"请尝试其他筛选条件或刷新页面"})]})});U.displayName="EmptyState";let $=(0,a.memo)(function(e){let{tokens:t,currentPage:r,darkMode:s,itemsPerPage:n=50,onRefresh:i,lastUpdated:l}=e,c=(0,R.useRouter)(),[d,u]=(0,a.useState)(!1),{resolvedTheme:h}=(0,y.D)(),f="dark"===h||s,g=(0,a.useMemo)(()=>{let e=(r-1)*n;return t.slice(e,e+n)},[t,r,n]),p=e=>{c.push("/token/".concat(e.chain,"/").concat(e.token))},x=async()=>{i&&(u(!0),await i(),setTimeout(()=>{u(!1)},800))};return(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)(z,{isDark:f}),(0,o.jsxs)("div",{className:(0,m.cn)("space-y-1 pb-1","relative","before:absolute before:inset-x-0 before:top-0 before:h-10 before:bg-gradient-to-b before:from-card before:to-transparent before:z-0 before:pointer-events-none"),children:[g.map((e,t)=>(0,o.jsx)(L,{token:e,index:(r-1)*n+t,darkMode:f,onClick:p},"".concat(e.chain,"-").concat(e.token))),0===g.length&&(0,o.jsx)(U,{isDark:f})]}),i&&(0,o.jsx)(F,{onRefresh:x,isRefreshing:d,lastUpdated:l,isDark:f})]})});var H=r(5623),B=r(1154);function V(){return(0,o.jsxs)(s.Zp,{className:"p-6 flex flex-col items-center justify-center min-h-[400px]",children:[(0,o.jsx)(B.A,{className:"h-8 w-8 animate-spin text-primary mb-4"}),(0,o.jsx)("p",{className:"text-muted-foreground",children:"正在加载代币数据..."})]})}let J=(0,a.memo)($),X=(0,a.memo)(function(e){let{topics:t,activeTopic:r,onTopicChange:a,mode:s="market",scrollRef:n}=e,{resolvedTheme:i}=(0,y.D)(),l="dark"===i;t.findIndex(e=>e.id===r);let c=e=>{switch(e){case"hot":return(0,o.jsx)(j.A,{className:"h-4 w-4 mr-1.5"});case"new":return(0,o.jsx)(k.A,{className:"h-4 w-4 mr-1.5"});case"meme":return(0,o.jsx)(N.A,{className:"h-4 w-4 mr-1.5"});case"defi":return(0,o.jsx)(_.A,{className:"h-4 w-4 mr-1.5"});case"nft":return(0,o.jsx)(A.A,{className:"h-4 w-4 mr-1.5"});case"ai":return(0,o.jsx)(T.A,{className:"h-4 w-4 mr-1.5"});default:return(0,o.jsx)(S.A,{className:"h-4 w-4 mr-1.5"})}},d=(e,t)=>{if(!t)return{};switch(e){case"hot":return{background:l?"linear-gradient(45deg, rgba(239,68,68,0.8), rgba(217,70,239,0.8))":"linear-gradient(45deg, rgba(239,68,68,0.9), rgba(217,70,239,0.9))",boxShadow:l?"0 2px 10px rgba(239,68,68,0.2)":"0 2px 8px rgba(239,68,68,0.25)"};case"new":default:return{background:l?"linear-gradient(45deg, rgba(59,130,246,0.8), rgba(16,185,129,0.8))":"linear-gradient(45deg, rgba(59,130,246,0.9), rgba(16,185,129,0.9))",boxShadow:l?"0 2px 10px rgba(59,130,246,0.2)":"0 2px 8px rgba(59,130,246,0.25)"};case"meme":return{background:l?"linear-gradient(45deg, rgba(245,158,11,0.8), rgba(249,115,22,0.8))":"linear-gradient(45deg, rgba(245,158,11,0.9), rgba(249,115,22,0.9))",boxShadow:l?"0 2px 10px rgba(245,158,11,0.2)":"0 2px 8px rgba(245,158,11,0.25)"};case"defi":return{background:l?"linear-gradient(45deg, rgba(16,185,129,0.8), rgba(5,150,105,0.8))":"linear-gradient(45deg, rgba(16,185,129,0.9), rgba(5,150,105,0.9))",boxShadow:l?"0 2px 10px rgba(16,185,129,0.2)":"0 2px 8px rgba(16,185,129,0.25)"};case"nft":return{background:l?"linear-gradient(45deg, rgba(124,58,237,0.8), rgba(139,92,246,0.8))":"linear-gradient(45deg, rgba(124,58,237,0.9), rgba(139,92,246,0.9))",boxShadow:l?"0 2px 10px rgba(124,58,237,0.2)":"0 2px 8px rgba(124,58,237,0.25)"};case"ai":return{background:l?"linear-gradient(45deg, rgba(79,70,229,0.8), rgba(45,212,191,0.8))":"linear-gradient(45deg, rgba(79,70,229,0.9), rgba(45,212,191,0.9))",boxShadow:l?"0 2px 10px rgba(79,70,229,0.2)":"0 2px 8px rgba(79,70,229,0.25)"}}},u="homepage"===s?t.filter(e=>["hot","meme","new","bsc","solana"].includes(e.id)):t;return(0,o.jsx)("div",{className:"mb-4 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",ref:n,children:(0,o.jsx)("div",{className:"flex space-x-2 min-w-max py-1",children:u.map(e=>{let t=e.id===r,s=d(e.id,t);return(0,o.jsxs)(w.$,{variant:t?"default":"outline",size:"sm",onClick:()=>a(e.id),className:(0,m.cn)("flex items-center whitespace-nowrap flex-shrink-0 rounded-full px-3 transition-all","h-8 font-medium",t?"text-white border-none":l?"bg-muted/40 border-muted/60 hover:bg-muted/80 text-foreground hover:border-muted/90":"bg-secondary/80 border-border/60 hover:bg-muted/60 text-foreground hover:border-muted/90"),style:s,children:[c(e.id),(0,o.jsx)("span",{className:"text-sm",children:e.name_zh})]},e.id)})})})}),Z=(0,a.memo)(function(e){let{currentPage:t,totalItems:r,itemsPerPage:a,onPageChange:s}=e,{resolvedTheme:n}=(0,y.D)(),i="dark"===n,l=Math.max(1,Math.ceil(r/a));if(l<2)return null;let c=(()=>{let e=[];if(l<=5){for(let t=1;t<=l;t++)e.push(t);return e}let r=Math.max(t-1,1),o=Math.min(t+1,l),a=r>2,s=o<l-1;return a&&s?[1,"left-dots",r,t,o,"right-dots",l]:a&&!s?[1,"left-dots",...Array.from({length:4},(e,t)=>l-3+t)]:!a&&s?[...Array.from({length:4},(e,t)=>t+1),"right-dots",l]:e})(),d=(e,r)=>{if("left-dots"===e||"right-dots"===e)return(0,o.jsx)("div",{className:(0,m.cn)("flex items-center justify-center w-8 h-8","text-muted-foreground"),children:(0,o.jsx)(H.A,{className:"h-4 w-4"})},"dots-".concat(r));let a=t===e;return(0,o.jsx)(w.$,{variant:a?"default":"outline",size:"icon",className:(0,m.cn)("w-8 h-8 text-xs rounded-full","transition-all duration-200",a?i?"bg-primary text-primary-foreground shadow-sm":"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90":i?"bg-muted/30 border-muted/50 hover:bg-muted/50 text-foreground":"bg-secondary/70 border-border/40 hover:bg-muted/30 text-foreground"),onClick:()=>s(e),children:e},"page-".concat(e))};return(0,o.jsxs)("div",{className:"flex items-center justify-center mt-4 space-x-1",children:[(0,o.jsx)(w.$,{variant:"outline",size:"icon",className:(0,m.cn)("h-8 w-8 rounded-full",i?"bg-muted/30 border-muted/50 hover:bg-muted/50":"bg-secondary/70 border-border/40 hover:bg-muted/30",1===t?"opacity-50 cursor-not-allowed":"hover-scale"),disabled:1===t,onClick:()=>s(t-1),children:(0,o.jsx)(b.A,{className:"h-4 w-4"})}),(0,o.jsx)("div",{className:"flex items-center space-x-1",children:c.map((e,t)=>d(e,t))}),(0,o.jsx)(w.$,{variant:"outline",size:"icon",className:(0,m.cn)("h-8 w-8 rounded-full",i?"bg-muted/30 border-muted/50 hover:bg-muted/50":"bg-secondary/70 border-border/40 hover:bg-muted/30",t===l?"opacity-50 cursor-not-allowed":"hover-scale"),disabled:t===l,onClick:()=>s(t+1),children:(0,o.jsx)(v.A,{className:"h-4 w-4"})})]})});function q(e){let{darkMode:t,mode:r="homepage",scrollRef:u,itemsPerPage:h=50}=e,{resolvedTheme:j}=(0,y.D)(),k="dark"===j,[N,_]=(0,a.useState)("hot"),[A,T]=(0,a.useState)(1),[S,R]=(0,a.useState)(!1),E=(0,a.useRef)(null),C=u||E,I=e=>{if(!C.current)return;let t=C.current.scrollLeft;C.current.scrollTo({left:"left"===e?t-200:t+200,behavior:"smooth"})},{topics:D,isLoading:O,error:P}=function(){let[e,t]=(0,a.useState)(i),[r,o]=(0,a.useState)(!0),[s,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{o(!0),l(null);let e=await fetch("/api/tokens?topic=topics",{next:{revalidate:3600}});if(!e.ok)throw Error("API request failed with status ".concat(e.status));let r=await e.json();r&&r.success&&r.data&&r.data.topics?t(r.data.topics):(console.error("Invalid API response format",r),t(i))}catch(e){console.error("Error fetching topics:",e),l(e instanceof Error?e.message:"Failed to fetch topics"),t(i),(0,n.oR)({title:"获取主题失败",description:"使用默认主题作为备用。",variant:"destructive"})}finally{o(!1)}})()},[]),{topics:e,isLoading:r,error:s}}(),{tokens:M,isLoading:L,error:F,refresh:z,lastUpdated:U,usingFallback:$}=function(e){let[t,r]=(0,a.useState)(!1),o="tokens_".concat(e),{data:s,isLoading:i,error:u,refresh:m,lastUpdated:h}=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{cacheDuration:o=c.DEFAULT,autoFetch:s=!0,timeout:n=15e3,maxRetries:i=2,retryDelay:d=1e3,dependencies:u=[]}=r,[m,h]=(0,a.useState)(null),[f,g]=(0,a.useState)(s),[p,x]=(0,a.useState)(null),[b,v]=(0,a.useState)(null),w=(0,a.useRef)(null),y=(0,a.useCallback)(e=>!!l[e]&&Date.now()-l[e].timestamp<o,[o]),j=(0,a.useCallback)(async function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];w.current&&w.current.abort(),w.current=new AbortController;try{if(!r&&y(t)){let e=l[t];h(e.data),x(e.error),v(new Date(e.timestamp));return}g(!0),x(null);let o=setTimeout(()=>{w.current&&w.current.abort()},n),a=0,s=null,c=null;for(;a<=i;)try{s=await e(),c=null;break}catch(e){if(c=e instanceof Error?e:Error(String(e)),"AbortError"===c.name)throw c;if(++a<=i){let e=d*Math.pow(1.5,a-1);console.log("API请求失败，".concat(e,"ms后重试 (").concat(a,"/").concat(i,")...")),await new Promise(t=>setTimeout(t,e))}}if(clearTimeout(o),c)throw c;h(s),v(new Date),l[t]={data:s,timestamp:Date.now(),error:null}}catch(r){let e=r instanceof Error?r:Error(String(r));"AbortError"!==e.name&&(console.error("API请求错误 (".concat(t,"):"),e),x(e),l[t]={data:m,timestamp:Date.now()-o+3e4,error:e})}finally{g(!1),w.current=null}},[t,m,e,y,i,d,n]),k=(0,a.useCallback)(()=>j(!0),[j]);return(0,a.useEffect)(()=>((s||u.length>0)&&j(!1),()=>{w.current&&w.current.abort()}),[j,s,...u]),{data:m,isLoading:f,error:p,refresh:k,lastUpdated:b,clearCache:(0,a.useCallback)(()=>{delete l[t]},[t])}}((0,a.useCallback)(async()=>{try{let t="/api/tokens?topic=".concat(e),r=await fetch(t,{next:{revalidate:300}});if(!r.ok)throw Error("API请求失败，状态码: ".concat(r.status));let o=await r.json();if(o&&o.success&&o.data&&Array.isArray(o.data.tokens))return o.data.tokens;throw console.error("API返回数据格式无效:",o),Error("API返回数据格式无效")}catch(e){throw console.error("获取代币数据失败:",e),e}},[e]),o,{cacheDuration:3e5,autoFetch:!0,maxRetries:2,dependencies:[e]}),f=s||[];return(0,a.useEffect)(()=>{u&&0===f.length?(r(!0),(0,n.oR)({title:"获取数据失败",description:"使用备用数据作为替代",variant:"destructive"})):i||u||!(f.length>0)||r(!1)},[u,i,f]),{tokens:f.length>0?f:u?d:[],isLoading:i,error:u?u.message:null,refresh:m,lastUpdated:h,usingFallback:t}}(N),H=P||F,B=(0,a.useMemo)(()=>{let e=(A-1)*h,t=e+h;return M.slice(e,t)},[M,A,h]);return(O||L)&&0===M.length?(0,o.jsx)(V,{}):H&&0===M.length?(0,o.jsx)(s.Zp,{className:(0,m.cn)("p-6 border border-border animate-fade-in",k?"bg-card shadow-md":"bg-card shadow-sm"),children:(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center text-center gap-2",children:[(0,o.jsx)(p.A,{className:"h-8 w-8 text-destructive animate-pulse-subtle"}),(0,o.jsx)("div",{className:"text-destructive font-medium",children:"加载失败"}),(0,o.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:H}),(0,o.jsxs)(w.$,{variant:"outline",size:"sm",className:(0,m.cn)("gap-2 rounded-full px-4 hover-scale",k?"border-destructive/30 hover:bg-destructive/10":"border-destructive/30 hover:bg-destructive/5"),onClick:()=>z(),children:[(0,o.jsx)(x.A,{className:"h-4 w-4"}),"重试"]})]})}):(0,o.jsxs)(s.Zp,{className:(0,m.cn)("p-4 border border-border overflow-hidden animate-fade-in subtle-shadow","bg-card"),children:[$&&(0,o.jsxs)(f,{className:(0,m.cn)("mb-4 border rounded-lg","bg-warning/10 border-warning/20"),children:[(0,o.jsx)(p.A,{className:(0,m.cn)("h-4 w-4","text-warning")}),(0,o.jsx)(g,{className:"text-warning/90",children:"数据获取失败，当前显示的是备用数据。您可以尝试刷新页面或稍后再试。"})]}),(0,o.jsxs)("div",{className:"relative mb-2",children:[(0,o.jsxs)("div",{className:"absolute right-0 top-1 z-10 flex space-x-2",children:[(0,o.jsx)(w.$,{variant:"outline",size:"icon",className:(0,m.cn)("h-6 w-6 rounded-full opacity-80 hover-scale",k?"bg-muted/40 border-muted/50 hover:bg-muted/60":"bg-secondary/80 border-border/50 hover:bg-muted/60"),onClick:()=>I("left"),children:(0,o.jsx)(b.A,{className:"h-3 w-3"})}),(0,o.jsx)(w.$,{variant:"outline",size:"icon",className:(0,m.cn)("h-6 w-6 rounded-full opacity-80 hover-scale",k?"bg-muted/40 border-muted/50 hover:bg-muted/60":"bg-secondary/80 border-border/50 hover:bg-muted/60"),onClick:()=>I("right"),children:(0,o.jsx)(v.A,{className:"h-3 w-3"})})]}),(0,o.jsx)(X,{topics:D,activeTopic:N,onTopicChange:e=>{e!==N&&(R(!0),_(e),setTimeout(()=>{R(!1)},300),T(1))},mode:r,scrollRef:C})]}),(0,o.jsx)("div",{className:(0,m.cn)(S?"opacity-70":"opacity-100","transition-opacity duration-300"),children:(0,o.jsx)(J,{tokens:B,currentPage:A,darkMode:k,itemsPerPage:h,onRefresh:z,lastUpdated:U})}),(0,o.jsx)(Z,{currentPage:A,totalItems:M.length,itemsPerPage:h,onPageChange:e=>{T(e)}})]})}},3172:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(5155),a=r(2115);function s(e){let{src:t,title:r,className:s="",height:n="100%",width:i="100%",allowFullScreen:l=!1,sandbox:c="allow-scripts allow-same-origin allow-popups allow-forms",referrerPolicy:d="no-referrer",loading:u="lazy",style:m,onLoad:h}=e,f=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=f.current;if(!e)return;let t=t=>!(e.contentWindow===t.source&&t.data&&"object"==typeof t.data&&("ethereum"===t.data.type||t.data.ethereum||t.data.method&&"string"==typeof t.data.method&&t.data.method.includes("eth_")))||(t.stopImmediatePropagation(),!1);return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}},[]),(0,o.jsx)("iframe",{ref:f,src:t,title:r,className:s,height:n,width:i,sandbox:c,referrerPolicy:d,loading:u,style:m,allowFullScreen:l,onLoad:()=>{h&&h();try{let e=f.current;e&&e.contentWindow}catch(e){}}})}},4441:()=>{},4503:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m,oR:()=>u});var o=r(2115);let a=0,s=new Map,n=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||o()}}}),{id:r,dismiss:o,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=o.useState(c);return o.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},4964:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>c,av:()=>d,j7:()=>l,tU:()=>i});var o=r(5155),a=r(2115),s=r(2473),n=r(3999);let i=s.bL,l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(s.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});l.displayName=s.B8.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(s.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});c.displayName=s.l9.displayName;let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(s.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});d.displayName=s.UC.displayName},5430:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var o=r(2115);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,[r,a]=(0,o.useState)(e);return(0,o.useEffect)(()=>{let r=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}},6037:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var o=r(5155),a=r(2115),s=r(7489),n=r(3999);let i=a.forwardRef((e,t)=>{let{className:r,orientation:a="horizontal",decorative:i=!0,...l}=e;return(0,o.jsx)(s.b,{ref:t,decorative:i,orientation:a,className:(0,n.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...l})});i.displayName=s.b.displayName},6471:(e,t,r)=>{"use strict";r.d(t,{l:()=>N});var o=r(5155),a=r(2115);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function u(e){d=l(d,e),c.forEach(e=>{e(d)})}function m(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||o()}}}),{id:r,dismiss:o,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}var h=r(8555),f=r(2085),g=r(4416),p=r(3999);let x=h.Kq,b=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(h.LM,{ref:t,className:(0,p.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...a})});b.displayName=h.LM.displayName;let v=(0,f.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),w=a.forwardRef((e,t)=>{let{className:r,variant:a,...s}=e;return(0,o.jsx)(h.bL,{ref:t,className:(0,p.cn)(v({variant:a}),r),...s})});w.displayName=h.bL.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(h.rc,{ref:t,className:(0,p.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...a})}).displayName=h.rc.displayName;let y=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(h.bm,{ref:t,className:(0,p.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...a,children:(0,o.jsx)(g.A,{className:"h-4 w-4"})})});y.displayName=h.bm.displayName;let j=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(h.hE,{ref:t,className:(0,p.cn)("text-sm font-semibold",r),...a})});j.displayName=h.hE.displayName;let k=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)(h.VY,{ref:t,className:(0,p.cn)("text-sm opacity-90",r),...a})});function N(){let{toasts:e}=function(){let[e,t]=a.useState(d);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}();return(0,o.jsxs)(x,{children:[e.map(function(e){let{id:t,title:r,description:a,action:s,...n}=e;return(0,o.jsxs)(w,{...n,children:[(0,o.jsxs)("div",{className:"grid gap-1",children:[r&&(0,o.jsx)(j,{children:r}),a&&(0,o.jsx)(k,{children:a})]}),s,(0,o.jsx)(y,{})]},t)}),(0,o.jsx)(b,{})]})}k.displayName=h.VY.displayName},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var o=r(5155),a=r(2115),s=r(9708),n=r(2085),i=r(3999);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:c=!1,...d}=e,u=c?s.DX:"button";return(0,o.jsx)(u,{className:(0,i.cn)(l({variant:a,size:n,className:r})),ref:t,...d})});c.displayName="Button"},7623:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(5155);r(2115);var a=r(6766);function s(e){let{width:t=32,height:r=32,className:s=""}=e;return(0,o.jsx)(a.default,{src:"/logo.png",alt:"XAI Finance Logo",width:t,height:r,className:s,style:{display:"block",borderRadius:"50%",objectFit:"cover"}})}},8409:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(2115);function a(){return(0,o.useEffect)(()=>(()=>{try{let e=Object.getOwnPropertyDescriptor(window,"ethereum"),t=window.ethereum;t||(t={isPhantom:!1,isCoinbaseWallet:!1,isMetaMask:!1,_isStub:!0,request:async()=>{throw Error("Ethereum provider not initialized")}});try{Object.freeze(t)}catch(e){}try{(!e||e.configurable)&&Object.defineProperty(window,"ethereum",{configurable:!1,enumerable:!0,get:function(){return t},set:function(){return t}})}catch(e){}let r=new MutationObserver(e=>{e.forEach(e=>{"attributes"===e.type&&"ethereum"===e.attributeName&&(window.ethereum=t)})});r.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0});let o=function(){try{let e=console.error,t=console.log;console.error=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];try{let t=String(r[0]||"");if(t.includes("[object Object]")||t.includes("ethereum")||t.includes("Cannot redefine property"))return;e.apply(console,r)}catch(t){try{e.call(console,r[0])}catch(e){}}},console.log=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];try{if(1===r.length&&"object"==typeof r[0]&&null!==r[0]){try{t.call(console,"function"==typeof r[0].toString?r[0].toString():JSON.stringify(r[0],null,2))}catch(e){t.call(console,"[不可序列化对象]")}return}t.apply(console,r)}catch(e){try{t.call(console,"[日志错误]")}catch(e){}}};let r=e=>{try{let t=e.message||"";if(t.includes("[object Object]")||t.includes("ethereum")||t.includes("Cannot redefine property"))return e.preventDefault(),!1}catch(e){}return!0},o=e=>{try{let t=String(e.reason||"");if(t.includes("[object Object]")||t.includes("ethereum")||t.includes("Cannot redefine property"))return e.preventDefault(),!1}catch(e){}return!0};return window.addEventListener("error",r,!0),window.addEventListener("unhandledrejection",o,!0),()=>{try{window.removeEventListener("error",r,!0),window.removeEventListener("unhandledrejection",o,!0),console.error=e,console.log=t}catch(e){}}}catch(e){return()=>{}}}();return()=>{o(),r.disconnect()}}catch(e){return()=>{}}})(),[]),null}},8482:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i});var o=r(5155),a=r(2115),s=r(3999);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},9009:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var o=r(5155),a=r(6874),s=r.n(a),n=r(5695),i=r(7340),l=r(235),c=r(5456),d=r(1497),u=r(1007),m=r(1362),h=r(3999);function f(e){let{darkMode:t,currentTab:r,isDark:a}=e,f=(0,n.usePathname)(),{resolvedTheme:g}=(0,m.D)(),p=[{name:"首页",icon:i.A,href:"/",id:"home"},{name:"市场",icon:l.A,href:"/market",id:"market"},{name:"发现",icon:c.A,href:"/discover",id:"discover"},{name:"聊天",icon:d.A,href:"/forum",id:"forum"},{name:"我的",icon:u.A,href:"/profile",id:"profile"}];return(0,o.jsx)("div",{className:(0,h.cn)("fixed bottom-0 left-0 right-0 z-50 border-t",(void 0!==a?a:void 0!==t?t:"dark"===g)?"bg-card border-border/30":"bg-background border-border/20"),children:(0,o.jsx)("div",{className:"max-w-md mx-auto grid grid-cols-5",children:p.map(e=>{let t=r?e.id===r:f===e.href,a=e.icon;return(0,o.jsxs)(s(),{href:e.href,className:(0,h.cn)("flex flex-col items-center justify-center py-2",t?"text-primary":"text-muted-foreground hover:text-foreground/80"),children:[(0,o.jsx)(a,{className:(0,h.cn)("w-5 h-5",t?"text-primary":"text-inherit")}),(0,o.jsx)("span",{className:"text-xs mt-1",children:e.name})]},e.name)})})})}},9230:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var o=r(5155),a=r(2115),s=r(7924),n=r(9852),i=r(5695),l=r(4503),c=r(6766),d=r(9515),u=r(5430),m=r(3999),h=r(6874),f=r.n(h);function g(e){let{isDark:t,onResultSelect:r,placeholder:h="搜索代币地址或符号...",simplified:g=!1,showLogo:p=!0,logoSize:x=32}=e,b=(0,i.useRouter)(),[v,w]=(0,a.useState)(""),[y,j]=(0,a.useState)(!1),[k,N]=(0,a.useState)([]),[_,A]=(0,a.useState)(!1),T=(0,a.useRef)(null),S=(0,u.d)(v,400);(0,a.useEffect)(()=>{let e=e=>{T.current&&!T.current.contains(e.target)&&A(!1)};return _&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[_]),(0,a.useEffect)(()=>{S&&S.trim().length>1?R(S):k.length>0&&N([])},[S]);let R=async e=>{j(!0),!1===_&&A(!0);let t=/^0x[a-fA-F0-9]{40}$/.test(e.trim()),r=/^[1-9A-HJ-NP-Za-km-z]{32,44}$/.test(e.trim());try{let o=await (0,d.hT)(e);if(N(o),o.length>0)A(!0);else if((t||r)&&e.trim()){let t=e.trim();A(!1),b.push("/token/".concat(r?"solana":"ethereum","/").concat(t)),(0,l.oR)({title:"正在加载代币数据",description:"跳转到代币详情页面"})}else e.trim()&&(0,l.oR)({title:"未找到结果",description:"没有找到匹配的代币，请尝试其他关键词",variant:"default"})}catch(o){if(console.error("搜索错误:",o),N([]),(t||r)&&e.trim()){let t=e.trim();A(!1),b.push("/token/".concat(r?"solana":"ethereum","/").concat(t)),(0,l.oR)({title:"API搜索失败",description:"正在尝试直接跳转到代币页面",variant:"default"})}else(0,l.oR)({title:"搜索失败",description:"无法获取搜索结果，请稍后再试",variant:"destructive"})}finally{j(!1)}},E=e=>{A(!1),r?r(e):e&&e.chain&&e.token&&b.push("/token/".concat(e.chain,"/").concat(e.token))};return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[p&&(0,o.jsx)(f(),{href:"/",className:"flex-shrink-0",children:(0,o.jsx)("div",{className:(0,m.cn)("relative overflow-hidden rounded-full","hover:shadow-md transition-shadow duration-200","hover:scale-105 transition-transform"),style:{width:x,height:x},children:(0,o.jsx)(c.default,{src:"/logo.png",alt:"XAI Finance",width:x,height:x,className:"object-cover"})})}),(0,o.jsxs)("div",{className:"relative flex-grow",children:[(0,o.jsx)(n.p,{type:"text",placeholder:h,className:(0,m.cn)("w-full h-10 pl-10 rounded-full shadow-sm","transition-all duration-200 border-opacity-60","focus:ring-2 focus:ring-primary/30 focus:border-primary/60",t?"bg-muted/40 border-muted/60 text-foreground":"bg-secondary/80 border-border/50 text-foreground"),value:v,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R(v)},onFocus:()=>A(!0)}),(0,o.jsx)(s.A,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"})]})]}),_&&(0,o.jsx)("div",{ref:T,className:(0,m.cn)("absolute left-0 right-0 mt-1 max-h-96 overflow-y-auto rounded-md shadow-lg z-50 animate-fade-in",t?"bg-card border border-border/70":"bg-card border border-border/40"),style:{marginLeft:p?"".concat(x+12,"px"):"0"},children:y?(0,o.jsxs)("div",{className:"p-4 text-center text-sm",children:[(0,o.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full inline-block mr-2"}),"搜索中..."]}):k.length>0?k.map((e,r)=>{var a;return(0,o.jsxs)("div",{className:(0,m.cn)("p-3 flex items-center gap-3 text-sm cursor-pointer transition-colors","border-b last:border-0",t?"border-border/30 hover:bg-muted/50":"border-border/20 hover:bg-secondary/70"),onClick:()=>E(e),children:[(0,o.jsx)("div",{className:"relative w-9 h-9 rounded-full overflow-hidden bg-muted flex-shrink-0 shadow-sm",children:e.logo_url&&""!==e.logo_url.trim()?(0,o.jsx)(c.default,{src:e.logo_url,alt:e.symbol||"Token",fill:!0,className:"object-cover transition-transform hover:scale-110",style:{transition:"transform 0.2s ease"},onError:e=>{e.target.src="/images/token-placeholder.png"}}):(0,o.jsx)("div",{className:(0,m.cn)("w-full h-full flex items-center justify-center text-xs font-medium text-white","bg-gradient-to-br ".concat(r%5==0?"from-pink-500 to-rose-500":r%5==1?"from-blue-500 to-indigo-500":r%5==2?"from-green-500 to-emerald-500":r%5==3?"from-amber-500 to-orange-500":"from-purple-500 to-fuchsia-500")),children:(null===(a=e.symbol)||void 0===a?void 0:a.charAt(0))||"?"})}),(0,o.jsxs)("div",{className:"flex-grow",children:[(0,o.jsx)("div",{className:"font-medium",children:e.symbol}),(0,o.jsxs)("div",{className:"text-xs text-muted-foreground truncate max-w-[120px]",children:[e.name," • ",e.chain.toUpperCase()]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"text-xs font-medium",children:["$","string"==typeof e.current_price_usd?parseFloat(e.current_price_usd).toFixed(6):(e.current_price_usd||0).toFixed(6)]}),e.price_change_24h&&(0,o.jsxs)("div",{className:(0,m.cn)("text-xs px-2 py-0.5 rounded-full mt-1 inline-block",parseFloat(String(e.price_change_24h))>=0?"text-emerald-500 bg-emerald-500/10":"text-rose-500 bg-rose-500/10"),children:[parseFloat(String(e.price_change_24h))>=0?"+":"",parseFloat(String(e.price_change_24h)).toFixed(2),"%"]})]})]},r)}):v.trim()?(0,o.jsxs)("div",{className:"p-6 text-center",children:[(0,o.jsx)("div",{className:"text-muted-foreground mb-1",children:"未找到相关代币"}),(0,o.jsx)("div",{className:"text-xs text-muted-foreground/70",children:"请尝试其他关键词或代币地址"})]}):null})]})}},9515:(e,t,r)=>{"use strict";r.d(t,{Ae:()=>n,NQ:()=>i,hT:()=>a,mJ:()=>s});var o=r(82);async function a(e,t){let r=(0,o.c$)("/api/search-tokens",{keyword:e,chain:t});console.log("Searching tokens with URL:",r);try{let e=await (0,o.AT)(r,{timeout:1e4,retries:1});if(!e.success)throw Error(e.error||"搜索请求失败");return e.tokens||[]}catch(e){throw console.error("搜索代币错误:",e),e}}async function s(e,t){try{let r={address:encodeURIComponent(e),chain:encodeURIComponent(t)},a=(0,o.c$)("/api/token-details",r),s=await (0,o.AT)(a,{timeout:15e3,next:{revalidate:60}});if(console.log("[getTokenDetails] 原始API响应:",s),!s.success)throw Error(s.error||"获取代币详情失败");let n=s.logo||"";console.log("[getTokenDetails] API返回的Logo URL: ".concat(n)),console.log("[getTokenDetails] 代币名称: ".concat(s.name||"N/A")),console.log("[getTokenDetails] 代币符号: ".concat(s.symbol||"N/A")),console.log("[getTokenDetails] 持有人数量: ".concat(s.holders||0)),console.log("[getTokenDetails] 总供应量: ".concat(s.totalSupply||0));let i={tokenInfo:{symbol:s.symbol||"",name:s.name||"",token:s.address||e,logo_url:n,current_price_usd:s.price||0,price_change_24h:s.priceChange24h||0,tx_volume_u_24h:s.volume24h||0,holders:s.holders||0,chain:s.chain||t,price:s.price||0,priceChange24h:s.priceChange24h||0,volume24h:s.volume24h||0,marketCap:s.marketCap||0},price:s.price||0,priceChange:s.priceChange||0,volume24h:s.volume24h||0,marketCap:s.marketCap||0,totalSupply:s.totalSupply||0,holders:s.holders||0,lpAmount:s.lpAmount||0,lockPercent:s.lockPercent||0,name:s.name||"",symbol:s.symbol||"",address:s.address||e,logo:n,chain:s.chain||t,website:s.website||void 0,twitter:s.twitter||void 0,telegram:s.telegram||void 0,created_at:s.created_at||void 0,buy_tax:s.buy_tax||0,sell_tax:s.sell_tax||0,circulating_supply:s.circulating_supply||0,ath:s.ath||0,risk_score:s.risk_score||void 0,verified:s.verified||!1};return console.log("[getTokenDetails] 处理后的代币详情:",i),i}catch(e){throw console.error("[getTokenDetails] 获取代币详情错误:",e),e}}async function n(e,t){try{console.log("[getTokenTopHolders] 开始请求 address=".concat(e,", chain=").concat(t));let r={address:encodeURIComponent(e),chain:encodeURIComponent(t)},a=(0,o.c$)("/api/token-holders",r);console.log("[getTokenTopHolders] 请求URL: ".concat(a));let s=await (0,o.AT)(a,{timeout:15e3,next:{revalidate:60}});if(console.log("[getTokenTopHolders] API响应: ",JSON.stringify(s).substring(0,200)+"..."),!s.success)return console.error("[getTokenTopHolders] API返回错误: ".concat(s.error||"未知错误")),[];let n=[];if(Array.isArray(s.holders))console.log("[getTokenTopHolders] 使用holders数组字段, 长度=".concat(s.holders.length)),n=s.holders;else if(Array.isArray(s.data))console.log("[getTokenTopHolders] 使用data数组字段, 长度=".concat(s.data.length)),n=s.data;else{if(!Array.isArray(s))return console.error("[getTokenTopHolders] 未找到期望的持币人数据字段"),console.log("[getTokenTopHolders] 响应结构:",Object.keys(s)),[];console.log("[getTokenTopHolders] 响应本身是数组, 长度=".concat(s.length)),n=s}return n.length>0&&console.log("[getTokenTopHolders] 第一个持币人样本:",JSON.stringify(n[0])),n}catch(e){return console.error("[getTokenTopHolders] 发生错误:",e),[]}}async function i(e,t){try{let r;console.log("[getTokenRiskReport] 开始请求风险报告: address=".concat(e,", chain=").concat(t));let a={address:encodeURIComponent(e),chain:encodeURIComponent(t)},s=(0,o.c$)("/api/token-risk",a);console.log("[getTokenRiskReport] 请求URL: ".concat(s));let n=await (0,o.AT)(s,{timeout:15e3,next:{revalidate:3600}});if(console.log("[getTokenRiskReport] 原始API响应:",JSON.stringify(n).substring(0,200)+"..."),1===n.status&&n.data)console.log("[getTokenRiskReport] 检测到标准格式API响应, 使用 data 字段"),r=n.data;else if(n.success&&n.risk)console.log("[getTokenRiskReport] 检测到旧格式API响应, 使用 risk 字段"),r=n.risk;else{if("object"!=typeof n||null===n||n.error||n.msg)return console.error("[getTokenRiskReport] API返回错误:",n.error||n.msg||"未能识别API返回格式"),null;console.log("[getTokenRiskReport] 使用整个响应对象作为风险数据"),r=n}if(!r)return console.error("[getTokenRiskReport] 无法从响应中提取风险数据",n),null;if(console.log("[getTokenRiskReport] 风险报告字段:",Object.keys(r).slice(0,10).join(", ")+"..."),!r.risk_reasons){let e=[];1===r.is_honeypot&&e.push("代币为蜜罐合约，可能无法出售"),("1"===r.hidden_owner||1===r.hidden_owner)&&e.push("代币存在隐藏所有者"),1===r.has_mint_method&&e.push("合约包含铸币功能，可能导致通货膨胀"),1===r.has_black_method&&e.push("合约包含黑名单功能"),1===r.has_white_method&&e.push("合约包含白名单功能"),("1"===r.analysis_big_wallet||1===r.analysis_big_wallet)&&e.push("存在大额持仓钱包"),parseFloat(r.creator_percent)>10&&e.push("创建者持有较高份额: ".concat(r.creator_percent,"%")),("1"===r.selfdestruct||1===r.selfdestruct)&&e.push("合约包含自毁功能"),1===r.big_lp_without_any_lock&&e.push("大额流动性池未锁定"),("1"===r.transfer_pausable||1===r.transfer_pausable)&&e.push("转账功能可被暂停"),("1"===r.cannot_sell_all||1===r.cannot_sell_all)&&e.push("无法全部卖出代币"),("1"===r.can_take_back_ownership||1===r.can_take_back_ownership)&&e.push("合约可重新获取所有权"),r.risk_score>50&&0===e.length&&e.push("代币风险评分较高，建议谨慎交易"),e.length>0&&(r.risk_reasons=e)}return r}catch(e){return console.error("[getTokenRiskReport] 获取合约风险报告错误:",e),null}}r(9509).env.AVE_API_KEY},9852:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var o=r(5155),a=r(2115),s=r(3999);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,o.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"}}]);