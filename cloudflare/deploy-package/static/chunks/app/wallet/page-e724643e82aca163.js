(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1730],{1267:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>y});var t=r(5155),a=r(2115),n=r(8482),l=r(7168),i=r(6037),c=r(4503),d=r(6471),o=r(7550),m=r(9785),x=r(5339),h=r(4357),u=r(3786),j=r(4616),w=r(3052),b=r(6874),f=r.n(b),p=r(9009),g=r(8409),v=r(3999),N=r(1362);function y(){var e;let{resolvedTheme:s}=(0,N.D)(),r="dark"===s,{toast:b}=(0,c.dj)(),[y,k]=(0,a.useState)(!1),[A,_]=(0,a.useState)(null),[C,M]=(0,a.useState)(null),[z,B]=(0,a.useState)("0"),[S,q]=(0,a.useState)(!1),[E,$]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if(window.ethereum){$(!0);try{let e=await window.ethereum.request({method:"eth_accounts"});e&&e.length>0&&O(e)}catch(e){console.error("获取账户失败:",e)}}})()},[]);let O=async e=>{if(0===e.length){k(!1),_(null),B("0");return}k(!0),_(e[0]);try{var s;let e=await (null===(s=window.ethereum)||void 0===s?void 0:s.request({method:"eth_chainId"}));M(e||null)}catch(e){console.error("获取链ID失败:",e)}try{if(window.ethereum){let s=await window.ethereum.request({method:"eth_getBalance",params:[e[0],"latest"]}),r=parseInt(s,16)/1e18;B(r.toFixed(4))}}catch(e){console.error("获取余额失败:",e)}},W=async()=>{if(!window.ethereum){b({title:"未检测到以太坊钱包",description:"请安装MetaMask或其他以太坊钱包扩展",variant:"destructive"});return}q(!0);try{let e=await window.ethereum.request({method:"eth_requestAccounts"});O(e),window.ethereum.on("accountsChanged",O),b({title:"钱包已连接",description:"您的钱包已成功连接"})}catch(e){console.error("连接钱包失败:",e),b({title:"连接失败",description:"无法连接到您的钱包",variant:"destructive"})}finally{q(!1)}};return(0,t.jsxs)("div",{className:(0,v.cn)("min-h-screen pb-16",r?"bg-[#0b101a] text-white":"bg-white text-foreground"),children:[(0,t.jsx)(g.A,{}),(0,t.jsxs)("div",{className:"max-w-md mx-auto pb-16",children:[(0,t.jsx)("div",{className:(0,v.cn)("sticky top-0 z-10 flex items-center justify-between p-4 border-b",r?"bg-[#0b101a] border-border/20":"bg-white border-border/10"),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(f(),{href:"/",children:(0,t.jsx)(l.$,{variant:"ghost",size:"icon",className:"rounded-full mr-2",children:(0,t.jsx)(o.A,{className:"w-5 h-5"})})}),(0,t.jsx)("h1",{className:"text-xl font-bold",children:"我的钱包"})]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(n.Zp,{className:(0,v.cn)("overflow-hidden",r?"bg-card/50 border-border/30":"bg-card border-border/50"),children:y?(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.aR,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(n.ZB,{children:"钱包信息"}),(0,t.jsx)(l.$,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-100/10",onClick:()=>{k(!1),_(null),M(null),B("0"),window.ethereum&&window.ethereum.removeListener("accountsChanged",O),b({title:"钱包已断开",description:"您的钱包已断开连接"})},children:"断开连接"})]}),(0,t.jsx)(n.BT,{children:C&&({"0x1":"以太坊主网","0x5":"Goerli测试网","0x89":"Polygon","0xa86a":"Avalanche","0xa":"Optimism","0xa4b1":"Arbitrum One","0x38":"BNB智能链","0xfa":"Fantom"})[C]||"未知网络"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:(0,v.cn)("w-10 h-10 rounded-full flex items-center justify-center",r?"bg-primary/20":"bg-primary/10"),children:(0,t.jsx)(m.A,{className:(0,v.cn)("w-5 h-5",r?"text-primary/90":"text-primary")})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"账户地址"}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center",children:[(e=A||"")?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",(0,t.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-6 w-6 ml-1",onClick:()=>{A&&(navigator.clipboard.writeText(A),b({title:"已复制",description:"地址已复制到剪贴板"}))},children:(0,t.jsx)(h.A,{className:"h-3 w-3"})})]})]})]}),(0,t.jsx)("a",{href:"https://etherscan.io/address/".concat(A),target:"_blank",rel:"noopener noreferrer",children:(0,t.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})})]}),(0,t.jsx)(i.w,{className:r?"bg-border/20":"bg-border/30"}),(0,t.jsxs)("div",{className:"pt-2",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"余额"}),(0,t.jsxs)("div",{className:"text-3xl font-bold mt-1",children:[z," ETH"]})]})]})})]}):(0,t.jsx)(n.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:(0,v.cn)("w-16 h-16 rounded-full mx-auto flex items-center justify-center",r?"bg-primary/20":"bg-primary/10"),children:(0,t.jsx)(m.A,{className:(0,v.cn)("w-8 h-8",r?"text-primary/90":"text-primary")})}),(0,t.jsx)("h2",{className:"mt-4 text-xl font-bold",children:"连接钱包"}),(0,t.jsx)("p",{className:(0,v.cn)("mt-2 text-sm",r?"text-muted-foreground":"text-muted-foreground/80"),children:"连接您的以太坊钱包以查看您的资产"}),!E&&(0,t.jsxs)("div",{className:(0,v.cn)("mt-4 p-3 rounded-lg text-sm flex items-start",r?"bg-yellow-500/10 text-yellow-300":"bg-yellow-50 text-yellow-800"),children:[(0,t.jsx)(x.A,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:["未检测到钱包扩展。请安装",(0,t.jsx)("a",{href:"https://metamask.io/download/",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"MetaMask"}),"或其他以太坊钱包扩展。"]})]}),(0,t.jsx)(l.$,{className:"mt-5 w-full",disabled:S||!E,onClick:W,children:S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"连接中..."]}):"连接钱包"})]})})})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h2",{className:(0,v.cn)("text-lg font-medium mb-2 px-1",r?"text-foreground/90":"text-foreground/80"),children:"功能"}),(0,t.jsxs)(n.Zp,{className:(0,v.cn)("overflow-hidden",r?"bg-card/50 border-border/30":"bg-card border-border/50"),children:[(0,t.jsxs)(f(),{href:"/wallet/add-token",className:(0,v.cn)("p-3 flex items-center justify-between cursor-pointer",r?"hover:bg-muted/30":"hover:bg-muted/20"),children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:(0,v.cn)("w-8 h-8 rounded-full flex items-center justify-center mr-3",r?"bg-primary/20":"bg-primary/10"),children:(0,t.jsx)(j.A,{className:(0,v.cn)("w-4 h-4",r?"text-primary/90":"text-primary")})}),(0,t.jsx)("span",{children:"添加代币"})]}),(0,t.jsx)(w.A,{className:"w-4 h-4 text-muted-foreground"})]}),(0,t.jsx)(i.w,{className:r?"bg-border/20":"bg-border/30"}),(0,t.jsxs)(f(),{href:"/trade",className:(0,v.cn)("p-3 flex items-center justify-between cursor-pointer",r?"hover:bg-muted/30":"hover:bg-muted/20"),children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:(0,v.cn)("w-8 h-8 rounded-full flex items-center justify-center mr-3",r?"bg-primary/20":"bg-primary/10"),children:(0,t.jsxs)("svg",{className:(0,v.cn)("w-4 h-4",r?"text-primary/90":"text-primary"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M7 10v4h10v-4"}),(0,t.jsx)("path",{d:"M12 14v4"}),(0,t.jsx)("path",{d:"M12 6v4"})]})}),(0,t.jsx)("span",{children:"交易"})]}),(0,t.jsx)(w.A,{className:"w-4 h-4 text-muted-foreground"})]})]})]})]}),(0,t.jsx)(p.A,{darkMode:r}),(0,t.jsx)(d.l,{})]})}},4949:(e,s,r)=>{Promise.resolve().then(r.bind(r,1267))}},e=>{var s=s=>e(e.s=s);e.O(0,[8258,582,6228,6276,1058,8429,7466,4346,3601,11,9205,1925,9041,7827,6346,7358],()=>s(4949)),_N_E=e.O()}]);