(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5523],{3436:(e,t,a)=>{Promise.resolve().then(a.bind(a,9860))},9860:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(5155),r=a(2115),i=a(7550),c=a(4186),l=a(333),n=a(1366),d=a(2486),o=a(6766),m=a(6874),h=a.n(m),x=a(9009),p=a(3999),v=a(1362),g=a(8184),b=a(5695);let u={1:{id:"1",author:"crypto_fan",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=crypto_fan",content:"刚刚看了XAI最新的发展路线图，感觉很有潜力！大家怎么看？",timestamp:new Date(Date.now()-18e5),likes:15,comments:[{id:"c1",author:"blockchain_dev",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=blockchain_dev",content:"同意！特别是他们的扩容方案非常创新，很期待接下来的发展。",timestamp:new Date(Date.now()-15e5),likes:4},{id:"c2",author:"token_trader",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=token_trader",content:"我觉得技术是好的，但是他们的营销策略还需要加强。",timestamp:new Date(Date.now()-12e5),likes:2},{id:"c3",author:"crypto_newbie",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=crypto_newbie",content:"能分享一下路线图的链接吗？我想了解更多。",timestamp:new Date(Date.now()-9e5),likes:1}]},2:{id:"2",author:"blockchain_dev",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=blockchain_dev",content:"有人了解最近的Layer 2解决方案吗？想知道哪个在交易速度和费用方面表现最好。",timestamp:new Date(Date.now()-72e5),likes:8,comments:[{id:"c4",author:"eth_maxi",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=eth_maxi",content:"Optimism和Arbitrum都不错，但个人偏向Optimism的安全设计。",timestamp:new Date(Date.now()-36e5),likes:5},{id:"c5",author:"zk_fan",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=zk_fan",content:"你应该看看zkSync，我认为zk-rollups是未来的趋势。",timestamp:new Date(Date.now()-27e5),likes:3}]},3:{id:"3",author:"token_trader",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=token_trader",content:"今天市场波动很大啊，大家都在关注哪些币？",timestamp:new Date(Date.now()-18e6),likes:21,comments:[{id:"c6",author:"btc_holder",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=btc_holder",content:"依然是比特币，稳定才是王道。",timestamp:new Date(Date.now()-144e5),likes:7},{id:"c7",author:"defi_degen",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=defi_degen",content:"我在关注一些新的DeFi项目，收益率还不错。",timestamp:new Date(Date.now()-108e5),likes:4},{id:"c8",author:"nft_collector",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=nft_collector",content:"我觉得NFT市场最近有回暖的迹象，值得关注。",timestamp:new Date(Date.now()-72e5),likes:2}]}};function f(e){let{params:t}=e,a=(0,b.useRouter)(),{resolvedTheme:m}=(0,v.D)(),f="dark"===m,[w,j]=(0,r.useState)(null),[y,N]=(0,r.useState)(""),[k,_]=(0,r.useState)(!1),D=()=>{try{let e=localStorage.getItem("forumPosts");if(e)return JSON.parse(e,(e,t)=>"timestamp"===e?new Date(t):t)}catch(e){console.error("加载帖子数据失败:",e)}return[]},S=e=>{try{let t=localStorage.getItem("post_".concat(e));if(t)return JSON.parse(t,(e,t)=>"timestamp"===e?new Date(t):t)}catch(t){console.error("加载帖子详情失败 (ID: ".concat(e,"):"),t)}return null},A=e=>{try{localStorage.setItem("post_".concat(e.id),JSON.stringify(e));let t=D().map(t=>t.id===e.id?{...t,likes:e.likes,comments:e.comments.length}:t);localStorage.setItem("forumPosts",JSON.stringify(t))}catch(e){console.error("保存帖子详情失败:",e)}};(0,r.useEffect)(()=>{let e=S(t.id);if(e)j(e);else{let e=D().find(e=>e.id===t.id);if(e){let t={...e,comments:[]};j(t),A(t)}else{let e=u[t.id];e&&(j(e),A(e))}}},[t.id]);let C=e=>{if(w){let t={...w,comments:w.comments.map(t=>t.id===e?{...t,likes:t.likes+1}:t)};j(t),A(t)}};return w?(0,s.jsxs)("div",{className:(0,p.cn)("min-h-screen pb-16",f?"bg-[#0b101a] text-white":"bg-white text-black"),children:[(0,s.jsxs)("div",{className:"max-w-md mx-auto pb-16",children:[(0,s.jsxs)("div",{className:(0,p.cn)("sticky top-0 z-10 flex items-center justify-between p-4 border-b",f?"bg-[#0b101a] border-gray-800":"bg-white border-gray-200"),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(h(),{href:"/forum",children:(0,s.jsx)("button",{className:"rounded-full p-2 mr-2 hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"返回聊天广场",children:(0,s.jsx)(i.A,{className:"w-5 h-5"})})}),(0,s.jsx)("h1",{className:"text-xl font-bold",children:"帖子详情"})]}),(0,s.jsx)("button",{onClick:()=>{if(w&&confirm("确定要删除这篇帖子吗？此操作不可恢复。")){localStorage.removeItem("post_".concat(w.id));let e=D().filter(e=>e.id!==w.id);localStorage.setItem("forumPosts",JSON.stringify(e)),a.push("/forum")}},className:"text-red-500 hover:text-red-600 text-sm px-2 py-1 rounded-md",children:"删除"})]}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("div",{className:(0,p.cn)("rounded-lg border overflow-hidden",f?"bg-gray-900/50 border-gray-700":"bg-white border-gray-200"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3 mb-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full overflow-hidden",children:(0,s.jsx)(o.default,{src:w.avatar,alt:w.author,width:40,height:40,className:"object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:w.author}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[(0,s.jsx)(c.A,{className:"h-3 w-3 mr-1"}),(0,g.GP)(new Date(w.timestamp),"yyyy-MM-dd HH:mm")]})]})]}),(0,s.jsx)("div",{className:"py-2 text-lg",children:w.content}),(0,s.jsxs)("div",{className:"pt-3 flex items-center border-t mt-2 border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("button",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-sm flex items-center px-3 py-1 rounded-md",onClick:()=>{if(w){let e={...w,likes:w.likes+1};j(e),A(e)}},"aria-label":"点赞，当前点赞数 ".concat(w.likes),children:[(0,s.jsx)(l.A,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{children:w.likes})]}),(0,s.jsxs)("div",{className:"flex items-center ml-3 text-gray-500",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{children:w.comments.length})]})]})]})})}),(0,s.jsx)("div",{className:"px-4",children:(0,s.jsx)("div",{className:(0,p.cn)("rounded-lg border overflow-hidden",f?"bg-gray-900/50 border-gray-700":"bg-white border-gray-200"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("textarea",{placeholder:"添加评论...",className:(0,p.cn)("w-full resize-none min-h-[80px] p-3 rounded-md",f?"bg-gray-800 border-gray-700 text-white":"bg-gray-50 border-gray-200 text-black"),value:y,onChange:e=>N(e.target.value)}),(0,s.jsx)("div",{className:"flex justify-end mt-3",children:(0,s.jsx)("button",{onClick:()=>{if(!y.trim()){alert("评论不能为空，请输入评论内容");return}_(!0),setTimeout(()=>{if(w){let e={id:"c".concat(Date.now()),author:"current_user",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=current_user",content:y,timestamp:new Date,likes:0},t={...w,comments:[...w.comments,e]};j(t),A(t),N(""),_(!1),alert("评论发布成功！")}},800)},disabled:k||!y.trim(),className:(0,p.cn)("px-4 py-2 rounded-md flex items-center",f?"bg-blue-600 text-white":"bg-blue-500 text-white",(k||!y.trim())&&"opacity-50 cursor-not-allowed"),children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"发送中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"发送评论"]})})})]})})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("h2",{className:"text-lg font-medium mb-3 px-1",children:["评论 (",w.comments.length,")"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[w.comments.map(e=>(0,s.jsx)("div",{className:(0,p.cn)("rounded-lg border overflow-hidden",f?"bg-gray-900/50 border-gray-700":"bg-white border-gray-200"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3 mb-2",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-full overflow-hidden",children:(0,s.jsx)(o.default,{src:e.avatar,alt:e.author,width:32,height:32,className:"object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:e.author}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[(0,s.jsx)(c.A,{className:"h-3 w-3 mr-1"}),(0,g.GP)(new Date(e.timestamp),"yyyy-MM-dd HH:mm")]})]})]}),(0,s.jsx)("div",{className:"py-1 pl-11",children:e.content}),(0,s.jsx)("div",{className:"pt-2 flex items-center pl-11",children:(0,s.jsxs)("button",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-sm flex items-center px-2 py-1 rounded-md",onClick:()=>C(e.id),"aria-label":"点赞评论，当前点赞数 ".concat(e.likes),children:[(0,s.jsx)(l.A,{className:"h-3 w-3 mr-1"}),(0,s.jsx)("span",{children:e.likes})]})})]})},e.id)),0===w.comments.length&&(0,s.jsx)("div",{className:"text-center py-6 text-gray-500",children:"暂无评论，来发表第一条评论吧！"})]})]})]}),(0,s.jsx)(x.A,{darkMode:f})]}):(0,s.jsx)("div",{className:(0,p.cn)("min-h-screen flex items-center justify-center",f?"bg-[#0b101a] text-white":"bg-white text-black"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"帖子不存在"}),(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"无法找到该帖子或已被删除"}),(0,s.jsx)(h(),{href:"/forum",children:(0,s.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"返回聊天广场"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8258,582,6228,6276,1058,8429,7466,4346,3601,11,9205,1925,9041,7827,6346,7358],()=>t(3436)),_N_E=e.O()}]);