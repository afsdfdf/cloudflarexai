(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4569],{1870:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>x});var t=s(5155),a=s(2115),l=s(7550),i=s(2486),c=s(6874),n=s.n(c),d=s(9009),o=s(3999),m=s(1362),h=s(5695);function x(){let e=(0,h.useRouter)(),{resolvedTheme:r}=(0,m.D)(),s="dark"===r,[c,x]=(0,a.useState)(""),[u,b]=(0,a.useState)(!1),g=()=>{try{let e=localStorage.getItem("forumPosts");if(e)return JSON.parse(e,(e,r)=>"timestamp"===e?new Date(r):r)}catch(e){console.error("加载帖子数据失败:",e)}return[]},p=e=>{try{localStorage.setItem("forumPosts",JSON.stringify(e))}catch(e){console.error("保存帖子数据失败:",e)}},j=()=>{if(!c.trim()){alert("内容不能为空，请输入帖子内容");return}b(!0),p([{id:Date.now().toString(),author:"current_user",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=current_user",content:c,timestamp:new Date,likes:0,comments:0},...g()]),setTimeout(()=>{b(!1),alert("发布成功！"),e.push("/forum")},800)};return(0,t.jsxs)("div",{className:(0,o.cn)("min-h-screen pb-16",s?"bg-[#0b101a] text-white":"bg-white text-black"),children:[(0,t.jsxs)("div",{className:"max-w-md mx-auto pb-16",children:[(0,t.jsx)("div",{className:(0,o.cn)("sticky top-0 z-10 flex items-center justify-between p-4 border-b",s?"bg-[#0b101a] border-gray-800":"bg-white border-gray-200"),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(n(),{href:"/forum",children:(0,t.jsx)("button",{className:"rounded-full p-2 mr-2 hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"返回聊天广场",children:(0,t.jsx)(l.A,{className:"w-5 h-5"})})}),(0,t.jsx)("h1",{className:"text-xl font-bold",children:"发布新帖"})]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("div",{className:(0,o.cn)("rounded-lg border overflow-hidden p-6",s?"bg-gray-900/50 border-gray-700":"bg-white border-gray-200"),children:(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),j()},children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"post-content",className:"block text-sm font-medium",children:"帖子内容"}),(0,t.jsx)("textarea",{id:"post-content",placeholder:"分享您的想法、问题或见解...",className:(0,o.cn)("w-full resize-none min-h-[200px] p-3 rounded-md",s?"bg-gray-800 border-gray-700 text-white":"bg-gray-50 border-gray-200 text-black"),value:c,onChange:e=>x(e.target.value)})]}),(0,t.jsx)("button",{type:"submit",className:(0,o.cn)("w-full px-4 py-2 rounded-md flex items-center justify-center",s?"bg-blue-600 text-white":"bg-blue-500 text-white",(u||!c.trim())&&"opacity-50 cursor-not-allowed"),disabled:u||!c.trim(),children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"发布中..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"发布帖子"]})})]})})})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:(0,o.cn)("rounded-lg border overflow-hidden p-6",s?"bg-gray-900/50 border-gray-700":"bg-white border-gray-200"),children:[(0,t.jsx)("h3",{className:"text-lg font-medium mb-3",children:"发帖指南"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-500",children:[(0,t.jsx)("li",{children:"请保持文明礼貌，尊重他人"}),(0,t.jsx)("li",{children:"避免发布敏感信息，如私钥、助记词等"}),(0,t.jsx)("li",{children:"提问时尽量描述清楚您的问题"}),(0,t.jsx)("li",{children:"分享信息时请注明来源"}),(0,t.jsx)("li",{children:"有价值的讨论将获得更多社区关注"})]})]})})]}),(0,t.jsx)(d.A,{darkMode:s})]})}},3891:(e,r,s)=>{Promise.resolve().then(s.bind(s,1870))}},e=>{var r=r=>e(e.s=r);e.O(0,[8258,582,6228,6276,1058,8429,7466,4346,3601,11,9205,1925,9041,7827,6346,7358],()=>r(3891)),_N_E=e.O()}]);